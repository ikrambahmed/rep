<div class="row">
  <div class="col-sm-12">
      <app-card  [title]="'إضافة '" [classHeader]="true" [blockClass]="'table-border-style'">

          <div class="row " dir="rtl" lang="ar">
              <div class="col-md-12  text-right">
                <table class="table table-hover table-bordered">
                    <thead>
                      <tr>
                        <th>اعتمادات المامورية </th>
                        <th>المرجع</th>
                        <th>تاريخ الادخال</th>
                        <th>تاريخ المصادقة</th>
                        <th *ngIf="val===false">
                          <button class="btn btn-outline-primary"  (click)="operationBudg='ADD';" >اظافة</button>
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let budget of budgets">
                        <td>{{budget.valeur}}</td>
                        <td>{{budget.reference}}</td>
                        <td>{{budget.dateBproj| date:'yyyy-MM-dd' }}</td>
                        <td>{{budget.dateVal| date:'yyyy-MM-dd'}}</td>
                        <td >
                          <button class="btn btn-outline-primary" *ngIf="budget.dateVal=== null || budget.dateVal===undefined"
                            (click)="operationBudg='EDIT';  selectedBudgetProj=budget">تغيير</button>  
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6  text-right">
                <label> مجموع </label>
                <label> مجموع الاعتمادات المرصودة </label>
                </div>
                </div>
          </app-card>
      <app-card  [title]="operationBudg == 'ADD' ? 'ادخال' :
      operationBudg == 'EDIT' ? 'تغيير': '' " [classHeader]="true" [blockClass]="'table-border-style'" *ngIf="operationBudg=='EDIT'|| operationBudg=='ADD'">
          <div class="container"  >
          
                  <div class="card-body ">
                      <h2 class="mb-0 text-center"> <span class="badge badge-secondary">{{y}}</span>
                      </h2>
                    <form [formGroup]="BudgetProjForm" >
                      <div class="row" dir="rtl" lang="ar">
                          <div class="form-group col-md-6 text-right" >
                              <label >المشروع </label>
                              <select class="form-control" formControlName="codPrj" [(ngModel)]="selectedBudgetProj.codPrj">
                                  <option *ngFor="let projet of projets" [ngValue]="projet.codPrj">{{projet.libprjA}}</option>
                                </select>    
                              </div>
                              <input type="text" formControlName="code" [(ngModel)]="codeDept" hidden>
                              <input type="date" formControlName="dateBproj" [(ngModel)]="dateSys" hidden>
                          </div>
          <div class="row">
              <div class="form-group col-md-6 text-right">
                  <label >المرجع</label>
                  <input type="text" class="form-control" formControlName="reference" [(ngModel)]="selectedBudgetProj.reference"> 
              </div>
              <div class="form-group col-md-6 text-right">
                  <label >الاعتمادات</label>
                  <input type="text" class="form-control" formControlName="valeur" [(ngModel)]="selectedBudgetProj.valeur">
              </div>
          </div>
          </form>
        
        
          <div>
              <button class="btn btn-success" (click)="operationBudg == 'ADD' ? add() : operationBudg=='EDIT'? update(): '' ; initialiser();">
                إدخال  
              </button>
          
          </div>
   
          </div>
          </div>
          </app-card>

        


          
            
  </div>
</div>

